https://csacademy.com/contest/fii-code-2020-round-2/task/attending-events/   

Jimmy wants to plan the evenings of the upcoming nights. For this, he has noted in his calendar in each evening what event is taking place. (He wrote down 1 for a movie running in the cinema, 2 for a musical concert and 3 for a comedy show).

It is not necessary to attend all the events. He wants to choose as many events as possible, respecting the following restrictions:

    the first event is a movie (type 1)
    after he watches a movie, the next event he chooses must be a musical concert (2)
    after he attends a musical concert (2), the next events must be a comedy show (3)
    after a comedy show (3), the next event must be a movie running in the cinema (1)


In other words, he must select the longest subsequence of the form `1 2 3 1 2 3 1 2` ... from the list of events.